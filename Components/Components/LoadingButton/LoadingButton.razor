@namespace CrahunComponents

<button disabled="@(IsLoading || DisabledExpression)" @onclick="@(async () => await OnClick.InvokeAsync())" @attributes="AdditionalProperties">
    @if (IsLoading)
    {
        if (LoadingTemplate is not null)
        {
            @LoadingTemplate
        }
        else
        {
            <div class="d-flex">
                <span class="spinner-border me-auto ms-auto" role="status" style="color: lightgray">
                    <span class="sr-only">Loading...</span>
                </span>
            </div>
        }
    }

    else
    {
        @ButtonTextTemplate;
    }
</button>

@code {
    [Parameter]
    public bool IsLoading { get; set; }

    [Parameter]
    public EventCallback<bool> IsLoadingChanged { get; set; }

    [Parameter]
    public RenderFragment ButtonTextTemplate { get; set; }

    [Parameter]
    public RenderFragment LoadingTemplate { get; set; }

    [Parameter]
    public EventCallback<bool> OnClick { get; set; }

    [Parameter]
    public bool DisabledExpression { get; set; }

    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object> AdditionalProperties { get; set; }
}
